<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--logo-->
    <link rel="shortcut icon" href="MEDIA/Medio-logo.webp" type="image/x-icon">
    <!--style-->
    <link rel="stylesheet" href="CSS/style.css">
    <!--liks utiles-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <title>Super Plaza Venezuela Sorteo</title>
</head>

<body>
    <!--Barra de navegacion-->
    <header class="navbar">
        <a href="index.html">
            <img id="logoPrincipal" class="logo" src="MEDIA/Log-super-plaza-venezuela_2.webp" width="200px"
                alt="SUPER PLAZA VENEZUELA">
        </a>
        <div class="acciones">
            <a class="ingresar" href="numberAleatorio.html" target="_blank">
                <i class="fa-solid fa-shuffle"></i> Números Aleatorios
            </a>
            <a class="ingresar" href="#containerHelp">
                <i class="fa-solid fa-circle-question"></i> Ayuda
            </a>
            <button class="tema" id="darkModeToggle">

            </button>
        </div>
    </header><br><br><br>

    <!-- Página principal de importación -->
    <div id="mainPage" class="main-page">
        <div class="container">
            <header class="header">
                <div class="logo" id="logoContainer">
                    <div class="logo-placeholder">
                        <img id="logoBody" src="MEDIA/Log-super-plaza-venezuela_2.webp" alt="">
                    </div>
                </div>
                <h1 class="h1v"><i class="fa-solid fa-gift"></i> Sorteo por Nombres al Azar</h1>
                <p class="subtitle"><i class="fa-solid fa-wand-magic-sparkles"></i> Realiza sorteos de manera fácil y
                    transparente</p>
            </header>

            <div class="import-section">
                <div class="form-group">
                    <label for="sorteoTitle">Título</label>
                    <input type="text" id="sorteoTitle" placeholder="Título del sorteo">
                </div>

                <div class="form-group">
                    <label for="participantsInput"><i class="fa-solid fa-users"></i> Participantes</label>
                    <textarea id="participantsInput" rows="4" style="resize: none; overflow: hidden;"
                        placeholder="Ingresa los nombres de los participantes, uno por línea"></textarea>
                    <div id="participantsSummary" class="participants-summary hidden"></div>
                </div>

                <div class="button-group">
                    <div class="file-input-wrapper">
                        <button class="btn btn-secondary" onclick="importarArchivo()">
                            <i class="fa-solid fa-file-import"></i> Importar archivo
                        </button>
                        <input type="file" id="fileInput" accept=".txt,.csv">
                    </div>
                    <button class="btn btn-secondary" id="clearBtn"><i class="fa-solid fa-eraser"></i> Limpiar
                        todo</button>
                    <button class="btn btn-success" id="startBtn"><i class="fa-solid fa-play"></i> Comenzar</button>
                </div>
                <div id="mensajeImportacion"></div>
            </div>
        </div>
    </div>

    <!-- help -->
    <section id="containerHelp">
        <div class="help-section">
            <h1 class="h1v">¿Cómo funciona la herramienta Sorteo por <strong>Nombres al Azar?</strong></h1><br>
            <div class="text-p">
                <p>Sorteo de Nombres al Azar es una herramienta online y gratuita que te permite
                    <strong>seleccionar ganadores aleatorios</strong>.
                </p>
                <p>Ingresa la lista de nombres y presiona el botón <strong>Comenzar</strong>.
                    Podrás aplicar filtros y seleccionar la cantidad de ganadores que desees.
                </p>
                <p>Al finalizar, se generará un certificado con los resultados del sorteo.</p>
            </div>
        </div>
    </section>

    <!--footer-->
    <footer id="footerPage" class="footer">
        <div class="footer-contenido">
            <div class="footer-seccion">
                <h3>Super Plaza Venezuela</h3>
                <p>
                    ¡Bendecidos Para Bendecir! <br>
                    Abiertos 24 horas para servirles siempre <br>
                    Tu supermercado de confianza <br>
                    Frescura, calidad y los mejores precios
                </p>
            </div>
            <div class="footer-seccion">
                <h4>Redes Sociales</h4>
                <ul>
                    <li class="ins">
                        <a href="https://www.instagram.com/angelpj007/" target="_blank">Instagram</a>
                    </li>
                    <li id="numberPhone1">809-575-3854
                        <span class="copy-msg" style="display: none; color: #0B6938; margin-left: 10px;"></span>
                    </li>
                    <li id="numberPhone2">829-745-2433
                        <span class="copy-msg" style="display: none; color: #0B6938; margin-left: 10px;"></span>
                    </li>
                    <li class="ins">
                        <a href="https://maps.app.goo.gl/syGxfdKwZaqkD4sG6" target="_blank">Avenida Estrella Sadhala,
                            Santiago, Dominican Republic 51000</a>
                    </li>
                </ul>
            </div>
            <div class="footer-seccion">
                <h4>Horario</h4>
                <ul>
                    <li>Lunes a Lunes: 24H</li>
                    <li><strong>Abiertos 24 horas para servirles siempre.</strong></li>
                </ul>
            </div>
        </div>
        <div class="footer-copy">
            <p>&copy; Super Plaza Venezuela. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Modal de configuración -->
    <div id="configModal" class="modal-overlay">
        <div class="modal">
            <h2><i class="fa-solid fa-gear"></i> Opciones</h2>

            <div class="modal-field">
                <label><i class="fa-solid fa-heading"></i> Título</label>
                <input type="text" id="modalTitle" placeholder="TREN DE LA VIDA">
            </div>

            <div class="modal-field">
                <label><i class="fa-solid fa-trophy"></i> # Ganadores</label>
                <div class="number-field">
                    <input type="number" id="winnersCount" value="1" min="1">
                    <div class="number-spinners">
                        <button type="button" class="spinner-btn" onclick="changeValue('winnersCount', 1)">▲</button>
                        <button type="button" class="spinner-btn" onclick="changeValue('winnersCount', -1)">▼</button>
                    </div>
                </div>
            </div>

            <div class="modal-field">
                <label><i class="fa-solid fa-user-shield"></i> # Suplentes</label>
                <div class="number-field">
                    <input type="number" id="alternatesCount" value="0" min="0">
                    <div class="number-spinners">
                        <button type="button" class="spinner-btn" onclick="changeValue('alternatesCount', 1)">▲</button>
                        <button type="button" class="spinner-btn"
                            onclick="changeValue('alternatesCount', -1)">▼</button>
                    </div>
                </div>
            </div>

            <div class="modal-field">
                <label><i class="fa-solid fa-gift"></i> Premios</label>
                <button class="define-btn" onclick="openPrizesModal()"><i class="fa-solid fa-pen-to-square"></i>
                    Definir</button>
            </div>

            <div class="modal-field toggle-field">
                <label><i class="fa-solid fa-clone"></i> Filtrar Duplicados</label>
                <div class="toggle-switch" id="duplicateToggle" onclick="toggleDuplicates()">
                    <div class="toggle-slider"></div>
                </div>
            </div>

            <div class="modal-field">
                <label><i class="fa-solid fa-wand-magic"></i> Animación</label>
                <div class="dropdown-field">
                    <select id="animationType">
                        <option value="giratorio">Nombres Giratorios</option>
                        <option value="regresiva">Cuenta Regresiva</option>
                        <option value="ruleta">Ruleta de la Fortuna</option>
                    </select>
                </div>
            </div>

            <div class="modal-field">
                <label><i class="fa-solid fa-clock"></i> Duración en seg.</label>
                <div class="number-field">
                    <input type="number" id="duration" value="5" min="1" max="30">
                    <div class="number-spinners">
                        <button type="button" class="spinner-btn" onclick="changeValue('duration', 1)">▲</button>
                        <button type="button" class="spinner-btn" onclick="changeValue('duration', -1)">▼</button>
                    </div>
                </div>
            </div>

            <div class="color-logo-row">
                <div class="logo-field">
                    <label><i class="fa-solid fa-image"></i> Logo</label>
                    <button class="logo-upload">
                        <i class="fa-solid fa-upload"></i> Subir
                        <input type="file" id="logoInput" accept="image/*">
                    </button>
                </div>
            </div>

            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" id="cancelConfig"><i class="fa-solid fa-xmark"></i>
                    Cancelar</button>
                <button class="modal-btn modal-btn-confirm" id="confirmConfig"><i class="fa-solid fa-check"></i>
                    Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Página del sorteo -->
    <div id="sorteoPage" class="sorteo-page">
        <button class="back-btn" id="backBtn"><i class="fa-solid fa-arrow-left"></i> Volver</button>

        <div class="container">
            <div class="sorteo-header">
                <img id="logo-cargado" class="logo" src="MEDIA/Log-super-plaza-venezuela_2.webp">
                <h1 class="sorteo-title" id="sorteoTitleDisplay"><i class="fa-solid fa-gift"></i> Mi Sorteo</h1>
                <p class="participants-count" id="participantsCount"><i class="fa-solid fa-users"></i> 0 participantes
                    cargados</p>
            </div>

            <div class="sorteo-display" id="sorteoDisplay">
                <div class="sorteo-lista" id="sorteoLista"></div>
                <p style="color: var(--text-muted); margin-top: 10px;">
                    Presiona <strong>"Comenzar Sorteo"</strong> cuando estés listo
                </p>
            </div>

            <div class="progress-bar hidden" id="progressBar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="sorteo-controls">
                <button class="btn btn-large btn-success" id="startSorteoBtn"><i class="fa-solid fa-play"></i> Comenzar Sorteo</button>
                <button class="btn btn-large btn-danger hidden" id="stopSorteoBtn"><i class="fa-solid fa-stop"></i> Detener</button>
                <button class="btn btn-large hidden" id="newSorteoBtn"><i class="fa-solid fa-rotate-right"></i> Sortear</button><br>
                <button id="proxParticipant" class="btn hidden"> <i class="fa-brands fa-stack-overflow"></i> Proximo participante</button><br>
                <button class="btn" id="addGanador"><i class="fa-solid fa-plus"></i> Añadir ganador</button>
                <!--Anado un gandor y me deje hacer el sorteo-->
            </div>

            <div class="resultados hidden" id="resultados">
                <h2><i class="fa-solid fa-trophy"></i> Resultados del Sorteo</h2>
                <div id="resultadosList"></div>
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-large hidden" id="openConfig"><i class="fa-solid fa-gear"></i> Reconfigurar
                        Sorteo</button>
                    <!--Abre la configuracion para reconfigurar mas ganadores o otros premios, etc...-->
                    <button class="btn" id="exportResults"><i class="fa-solid fa-download"></i> Exportar
                        Resultados</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de premios -->
    <div id="prizesModal" class="modal-overlay">
        <div class="modal">
            <h2><i class="fa-solid fa-gift"></i> Definir Premios</h2>
            <div class="modal-field">
                <label><i class="fa-solid fa-list"></i> Premios (uno por línea)</label>
                <textarea id="prizesInput" rows="6"
                    placeholder="Primer premio&#10;Segundo premio&#10;Tercer premio"></textarea>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" onclick="closePrizesModal()"><i
                        class="fa-solid fa-xmark"></i> Cancelar</button>
                <button class="modal-btn modal-btn-confirm" onclick="savePrizes()"><i class="fa-solid fa-check"></i>
                    Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal flotante para añadir premio a un nuevo ganador -->
    <div id="premioNuevoModal" class="modal-premio">
        <div class="modal-premio-content">
            <h3>Premio para el nuevo ganador</h3>
            <p>Escribe el premio que quieres asignar al ganador que se añadirá.</p><br>

            <input type="text" id="premioNuevoInput" placeholder="Ej: Tarjeta de regalo de $50">

            <div class="modal-premio-buttons">
                <button id="premioNuevoCancelar">Cancelar</button>
                <button id="premioNuevoAceptar">Aceptar</button>
            </div>
        </div>
    </div>

    <!--scrips-->
    <script src="JS/script.js"></script>
    <!--Dark mode-->
    <script>
        const toggleBtn = document.getElementById("darkModeToggle");
        const body = document.body;
        const logoPrincipal = document.getElementById("logoPrincipal");
        const logoSorteo = document.getElementById("logo-cargado");

        // Crea el ícono dentro del botón
        const icon = document.createElement("i");
        icon.classList.add("fa-solid", "fa-moon"); // inicia con luna
        toggleBtn.appendChild(icon);

        // estado inicial
        if (!body.getAttribute("data-theme")) {
            body.setAttribute("data-theme", "light");
            logoPrincipal.src = "MEDIA/Log-super-plaza-venezuela_2.webp"; // logo normal
            logoSorteo.src = "MEDIA/Log-super-plaza-venezuela_2.webp"; // logo normal
        }



        toggleBtn.addEventListener("click", () => {
            const currentTheme = body.getAttribute("data-theme");

            console.log("Tema actual:", currentTheme);
            if (currentTheme === "light") {

                body.setAttribute("data-theme", "dark");

                // cambiar ícono a sol
                icon.classList.replace("fa-moon", "fa-sun");

                // logo blanco
                logoPrincipal.src = "MEDIA/logo-blanco.webp";
                if (typeof logoBody !== "undefined") {
                    logoBody.src = "MEDIA/logo-blanco.webp";
                }

                if (typeof logoSorteo !== "undefined") {
                    logoSorteo.src = "MEDIA/logo-blanco.webp";
                }
            } else {
                body.setAttribute("data-theme", "light");

                // cambiar ícono a luna
                icon.classList.replace("fa-sun", "fa-moon");

                // logo normal
                logoPrincipal.src = "MEDIA/Log-super-plaza-venezuela_2.webp";
                if (typeof logoBody !== "undefined") {
                    logoBody.src = "MEDIA/Log-super-plaza-venezuela_2.webp";
                }

                logoSorteo.src = "MEDIA/Log-super-plaza-venezuela_2.webp";
                if (typeof logoSorteo !== "undefined") {
                    logoSorteo.src = "MEDIA/Log-super-plaza-venezuela_2.webp";
                }
            }
        });
    </script>
</body>

</html>